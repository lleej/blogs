title: VUE 之登录和权限

categories: vue

------

# 用户登录

- 输入用户名和密码
- 将用户名和密码发送到后台进行认证
- 后台返回验证结果以及`token`
- 本地保存`token`到`Cookie`中
- 每次请求时，需要将`token`作为唯一的身份证明
- `Cookie`的有效期是`Session`有效期，就是说浏览器关闭后会失效

# 权限

- 登录成功后，在`router.beforeEach`钩子中，发送请求获取用户信息
- 前端保存路由表，在`vuex`中进行维护和管理
- 后端返回用户的角色`role`
- 根据用户角色`role`，使用`router.addRoutes`方法，将路由动态挂载
- 同时根据路由渲染菜单区域

# 路由参数

- 除了`路由配置`中的属性外，为了便于控制菜单的显示和控制，加入了一些参数
- 参数列表
  - `icon`。侧边栏中显示的图标
  - `hidden`。是否在菜单中显示
  - `redirect`。是否在分栏中切换路由
  - `noDropDown`。是否显示子菜单
  - `meta`。加入`role:[]`用以控制权限
  - `name`。菜单中文名称 