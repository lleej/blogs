## 概念

### 同步异步

被调用函数的通讯模式。

- 同步：调用后，被调用函数一直等到有结果才返回
- 异步：调用后，被调用函数立即返回，当有结果了再另行通知调用方（如：回调函数）

也就是说：同步异步由**被调用方**决定。

### 阻塞非阻塞

调用方调用函数的方式

- 阻塞：调用函数后，无论函数是否立即返回，调用方都挂起（不进行其他处理）一直等到有实际结果后，继续执行
- 非阻塞：调用函数后，无论函数是否立即返回，调用方都继续执行

也就是说：阻塞非阻塞由**调用方**决定

### 经典例子

老王烧开水

同步&阻塞：老王拿普通水壶（同步），在厨房烧水，等着水开后关火（阻塞）

同步&非阻塞：老王拿普通水壶（同步），在厨房烧水，在客厅看电视等着水开后关火（非阻塞）

异步&阻塞：老王拿响水壶（异步），在厨房烧水，等着水开后关火（阻塞）

异步&非阻塞：老王拿响水壶（异步），在厨房烧毁，在客厅看电视，水壶响后去关火（非阻塞）

## 定义

顾名思义：`Future`即未来，也就是调用者在未来可以使用这个对象，获得执行结果和状态。多用于非阻塞、异步编程

问题：使用`Future`和使用`await`函数的区别？

思考：`await`属于同步非阻塞方式，需要一直等待返回才执行后面的代码。而`Future`属于异步非阻塞方式，调用函数返回`Future`对象后，给对象添加完成回调函数`add_done_callback`，由回调函数(参数为`Future`实例)处理

举例如下：

1. TCP客户端请求与服务端建立连接（使用非阻塞方式）
2. 客户端调用后立刻返回一个Future对象，可能需要过几秒钟才能建立连接
3. 客户端可以在Future对象上挂载`add_done_callback`回调函数，当Future对象关联的动作执行完毕后，通过回调函数通知客户端；当前客户端也可以阻塞方式，调用Future的`Done()`获取其执行状态，当执行完毕后获取其执行结果`result()`
4. 创建Future的类或函数，负责将执行结果告知客户端，通过`set_result`或者`set_exception`的方式。

