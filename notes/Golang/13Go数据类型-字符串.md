title: 13.Go语言学习笔记-Go基本数据类型-字符串
date: 2020-04-23
tags: Go
categories: Go语言
layout: post

------

摘要：本节介绍`Go`语言的基本数据类型：字符串

<!-- more -->

## 编码方式

**ASCII**

计算机面世初期使用的编码方式，即：美国信息交换标准代码。由一个字节（8位）表示128个字符

**Unicode**

需要支持多种语言（如：中文、德文、日文等），需要容纳世界上所有的语言和符号，逐步进化成**Unicode**编码方式，由四个字节（32位）表示了涵盖`100`多种语言，超过`120,000`个字符

不足：占用大量空间，很多字符只需要一个字节就能表示，但还是占用了四个字节的空间，对于数据的存储和传输都不是最优化的方案

**UTF-8**

在`Unicode`编码基础上，将`Unicode`码点编码为字节序列的变长编码，使用`1-4`个字节来表示`Unicode`字符

编码后，通过字节的高位`bit`来确定其长度

- 第`1`个字节高位是`0`，表示`ASCII`字符
- 第`1`个字节高位是`110`，表示需要两个字节
- 第`1`个字节高位是`1110`，表示需要三个字节
- 第`1`个字节高位是`11110`，表示需要四个字节
- 第`2-4`个字节的高位，必须是`10`

```tex
0xxxxxxx                             runes 0-127    (ASCII)
110xxxxx 10xxxxxx                    128-2047       (values <128 unused)
1110xxxx 10xxxxxx 10xxxxxx           2048-65535     (values <2048 unused)
11110xxx 10xxxxxx 10xxxxxx 10xxxxxx  65536-0x10ffff (other values unused)
```



## 字符串

> 与`Python`中的字符串类型一样

字符串类型是`string`

### 不可变序列

在`Go`语言中，字符串是**不可变**字符序列，一旦赋值就不能修改

```go
s := "hello, world"
s[0] = 'L' // compile error: cannot assign to s[0]
```

因为不可变的特性，使得多个变量可以同享相同的底层数据（非常安全）。对于字符串的复制、切片等操作的代价是很低的（不需要额外分配内存，性能非常高）

![img](./assets/ch3-04.png)

### 长度

通过内置函数`len`获得字符串的字节数

注意：是字符串的字节数，而不是字符串字符数

```go
s := "hello, world"
fmt.Println(len(s))     // "12"
```

### 下标访问

使用下标访问字符，下标从`0`开始到`len() -1`结束，返回的是**字节值**

```go
s := "hello, world"
fmt.Println(s[0], s[7]) // "104 119" ('h' and 'w')
```

## 字面量

`Go`语言中的字符串可以有三种字面量表示方式

### 默认方式

使用`""`双引号包含的字符序列，字符序列应该是键盘可以输入的字符

```go
var s = "Hello, world"
```

### 转义方式

如果不希望进行转义处理，可以使用原生字符串形式（与`Python`中的`r`一样）

```go
const GoUsage = `Go is a tool for managing Go source code.

Usage:
    go command [arguments]
...`
```

这种表示方式常用于正则表达式等场景

如果是无法通过键盘输入的字符，可以使用转义字符

```go
"世界"
"\xe4\xb8\x96\xe7\x95\x8c"
"\u4e16\u754c"
"\U00004e16\U0000754c"
```







