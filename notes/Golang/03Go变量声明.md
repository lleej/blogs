title: 03.Go语言学习笔记-Go变量声明
date: 2020-04-07
tags: Go
categories: Go语言
layout: post

------

摘要：本节介绍`Go`语言的变量和常量声明

<!-- more -->

## 声明

`Go`语言中的标识符（包括：变量和常量等等），在使用前必须进行声明

## 变量

> 顾名思义：变量就是在程序中可以改变其值的标识符

### 用法

`Go`语言有多种定义变量的用法

#### 标准格式

```go
var 变量名 变量类型
```

#### 批量格式

```go
var (
	变量1 变量类型
  变量2 变量类型
  ...
)
```

#### 初始化

```go
var 变量名 变量类型 = 表达式
```

#### 类型推导

```go
var 变量名 = 表达式
```

这时，编译器会根据表达式的值推导出变量的类型，称为**类型推导**

#### 短变量

在函数内部，可以使用简洁的`:=`方式声明并初始化变量

```go
func hello() {
  a := 10
  b := 'abc'
}
```

#### 匿名变量

定义变量的占位符，主要用于多重赋值时，想要忽略某个值。匿名变量不占用命名空间，不分配内存，可以重复使用

```go
func hello() {
  x, _ := foo()
  _, y := foo()
}
```

### 特点

- 声明的变量必须使用，否则编译时报错（？？？实测有不同的结果）
- 同一作用域内声明的变量，不能重名（大小写敏感）
- 不指定初始值时，初始化为默认值（数值型为`0`、字符串为`''`、布尔型为`false`、函数和指针等类型为`nil`）
- 函数外部出现的标识符，必须要经过事先声明

## 常量

> 常量一旦定义不能修改

### 用法

#### 标准格式

```go
const 常量名 = 表达式
```

#### 批量格式

```go
const (
	常量1 = 表达式
  常量2 = 表达式
  ...
)
```

#### 批量忽略

```go
const (
	常量1 = 表达式
  常量2
  常量3
  ...
)
```

这时，常量2、常量3...的值与常量1相同

#### 常量计数器

`iota`是常量计数器，只能在常量表达式中使用

在`const`关键字出现时，被重置为`0`。`const`中每**新增一行常量声明**将使`iota`计数一次（可理解为`const`语句块中的行索引）

```go
const (
	常量1 = iota
  常量2
  常量3
  ...
)
```

举例：

```go
const (
	n1 = iota // 0
  n2				// 1
  n3				// 2
  n4				// 3
)
```

### 特点

`iota`常量计数器的使用，可以简化常量声明

#### 跳过某些值

```go
const (
		n1 = iota //0
		n2        //1
		_
		n4        //3
	)
```

#### 中间插队

```go
const (
		n1 = iota //0
		n2 = 100  //100
		n3 = iota //2
		n4        //3
	)
	const n5 = iota //0
```

#### 多常量在一行

```go
const (
		a, b = iota + 1, iota + 2 //1,2
		c, d                      //2,3
		e, f                      //3,4
	)
```

#### 定义数量级

```go
const (
		_  = iota
		KB = 1 << (10 * iota)
		MB = 1 << (10 * iota)
		GB = 1 << (10 * iota)
		TB = 1 << (10 * iota)
		PB = 1 << (10 * iota)
	)
```









