title: 107.Go命令之go test
date: 2020-04-15
tags: Go命令
categories: Go命令
layout: post

------

摘要：本节介绍`Go`命令中的`go test`程序测试...

<!-- more -->

## 用途

对`Go`语言编写的程序进行测试。这种测试是以代码包为单位的，命令会自动测试每一个指定的代码包。

被测试代码包中要有对应的测试代码文件，即文件名以`_test`为后缀，内含若干测试函数的源码文件

```bash
$ go test 包名1 [包名2] ...
```

可以一次测试多个代码包，代码包使用导入路径格式，多个代码包间使用空格分割。在执行完所有代码包中的测试文件之后，会以代码包为单位打印出测试概要信息。

```bash
$ go test hello hello/other
ok      hello   		0.422s
?       hello/other     [no test files]
```

- 第一列代表测试结果。`ok`表示测试通过
- 第二列代表测试包名。`hello`测试代码包名称
- 第三列代表测试用时。`0.422s`表示测试用时

注意：第二行没有测试结果和测试时间，是因为`hello/other`包中没有任何测试文件和测试函数

## 命令标记

`go build`中可使用的标记，大多可以在`go test`中使用，毕竟后者也要先进行编译的工作。

| 标记名称 | 标记描述                                                     |
| -------- | ------------------------------------------------------------ |
| -c       | 生成用于运行测试的可执行文件，但不执行。<br />可执行文件命名为“pkg.test”，其中“pkg”为被测试代码包的导入路径的最后一个元素名 |
| -i       | 安装/重新安装运行测试所需的依赖包，但不编译和运行测试代码    |
| -o       | 指定用于运行测试的可执行文件的名称。<br />追加该标记不会影响测试代码的运行，除非同时追加了标记`-c`或`-i` |