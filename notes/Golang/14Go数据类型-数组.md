title: 14.Go语言学习笔记-Go复杂数据类型-数组
date: 2020-04-24
tags: Go
categories: Go语言
layout: post

------

摘要：本节介绍`Go`语言的复杂数据类型：数组。关键字：固定长度、同构元素

<!-- more -->

## 数组

数组是一个由固定长度的特定类型元素组成的序列，一个数组可以由零个或多个元素组成。因为数组的长度是固定的，因此在`Go`语言中很少直接使用数组。

和数组对应的类型是`Slice`（切片），它是可以增长和收缩动态序列，`slice`功能也更灵活，但是要理解`slice`工作原理的话需要先理解数组

数组的每个元素可以通过索引下标来访问，索引下标的范围是从`0`开始到数组长度减`1`的位置。内置的`len`函数将返回数组中元素的个数

数组声明的书写格式：`[长度]元素类型`，默认情况下，数组元素被初始化成元素类型对应的零值

数组的长度是数组类型的一个组成部分，因此`[3]int`和`[4]int`是两种不同的数组类型。数组的长度必须是常量表达式，因为数组的长度需要在编译阶段确定

```go
var arr [3]int		// arr 是数组类型，长度为3，元素类型为int
fmt.Println(arr)	// [0, 0, 0]
```

可以使用数组字面量声明和初始化标识符，如果在数组的长度位置出现的是"..."省略号，则表示数组的长度是根据初始化值的个数来计算

```go
var o [3]int = [3]int{1, 2, 3}
var r [3]int = [3]int{1, 2}
fmt.Println(r[2]) // "0"
q := [...]int{1, 2, 3}
fmt.Printf("%T\n", q) // "[3]int"
```

也可以指定一个索引和对应值列表的方式初始化

```go
r := [...]int{99: -1}
fmt.Printf("%T \n %[1]v", r) "[100]int"
```

初始化时指定了索引值为`99`的元素为`-1`，那么就是说有100个元素（下标是从`0`顺序递增的）,元素的类型为`int`

### 比较

两个相同类型的数组是可以直接比较其是否相等，只有数组中没有元素的值都相等时，两个数组才是相等的

- 类型相同（长度、元素类型）
- 值相同（每个对应下标元素的值都相同）

```go
a := [2]int{1, 2}
b := [...]int{1, 2}
c := [2]int{1, 3}
fmt.Println(a == b, a == c, b == c) // "true false false"
d := [3]int{1, 2}
fmt.Println(a == d) // compile error: cannot compare [2]int == [3]int
```

### 应用

因为数组的特点：定长、同构，导致其在使用中非常不便，因此在实际的开发中，一般都使用`slice`来替代数组